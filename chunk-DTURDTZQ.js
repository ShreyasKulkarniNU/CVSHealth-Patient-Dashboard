import{B as l,N as h,S as y,a as f,b as D,m as c}from"./chunk-BSVXXNVH.js";var S=Math.pow(10,8)*24*60*60*1e3,O=-S;var k=3600;var b=k*24,B=b*7,H=b*365.2425,R=H/12,F=R*3,M=Symbol.for("constructDateFrom");function m(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&M in n?n[M](t):n instanceof Date?new n.constructor(t):new Date(t)}function u(n,t){return m(t||n,n)}function v(n,t,a){let e=u(n,a?.in);return isNaN(t)?m(a?.in||n,NaN):(t&&e.setDate(e.getDate()+t),e)}function x(n,t,a){let e=u(n,a?.in);if(isNaN(t))return m(a?.in||n,NaN);if(!t)return e;let o=e.getDate(),r=m(a?.in||n,e.getTime());r.setMonth(e.getMonth()+t+1,0);let i=r.getDate();return o>=i?r:(e.setFullYear(r.getFullYear(),r.getMonth(),o),e)}function p(n,t,a){return v(n,-t,a)}function w(n,t,a){return x(n,-t,a)}var g=class n{mockPatients=this.generateMockPatients();mockMetrics=new Map;constructor(){this.mockPatients.forEach(t=>{this.mockMetrics.set(t.id,this.generateMockMetrics(t.id))})}generateMockPatients(){let t=["John","Jane","Robert","Emily","Michael","Sarah","David","Lisa","James","Mary","William","Patricia","Richard","Jennifer","Joseph","Linda","Thomas","Barbara","Christopher","Elizabeth"],a=["Doe","Smith","Johnson","Williams","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson"],e=["Dr. Sarah Lee","Dr. Mark Chen","Dr. Alex Wong","Dr. Emily Davis","Dr. Michael Brown"];return Array.from({length:30},(o,r)=>{let i=t[r%t.length],s=a[r%a.length];return{id:`PAT${String(r+1).padStart(5,"0")}`,firstName:i,lastName:s,dateOfBirth:new Date(1950+r%40,Math.floor(Math.random()*12),Math.floor(Math.random()*28)+1),gender:["male","female","other"][Math.floor(Math.random()*3)],mrn:`MRN-${String(Math.floor(Math.random()*1e6)).padStart(6,"0")}`,contactInfo:{phone:`(${String(Math.floor(Math.random()*900)+100)}) ${String(Math.floor(Math.random()*900)+100)}-${String(Math.floor(Math.random()*1e4)).padStart(4,"0")}`,email:`${i.toLowerCase()}.${s.toLowerCase()}@example.com`,address:{street:`${Math.floor(Math.random()*9999)+1} Main St`,city:"Springfield",state:"IL",zipCode:`${String(Math.floor(Math.random()*1e5)).padStart(5,"0")}`}},insurance:{provider:["BlueCross","Aetna","UnitedHealth","Medicare"][Math.floor(Math.random()*4)],policyNumber:`POL-${String(Math.floor(Math.random()*1e6)).padStart(6,"0")}`,groupNumber:`GRP-${String(Math.floor(Math.random()*1e4)).padStart(4,"0")}`},primaryPhysician:e[Math.floor(Math.random()*e.length)],medicalHistory:this.generateMedicalHistory(),currentMedications:this.generateMedications(),status:["active","inactive","pending"][Math.floor(Math.random()*3)],lastVisit:p(new Date,Math.floor(Math.random()*90)),nextAppointment:this.generateNextAppointment()}})}generateMedicalHistory(){let t=["Hypertension","Type 2 Diabetes","Arthritis","Osteoporosis","Hyperlipidemia"];return Array.from({length:Math.floor(Math.random()*3)+1},()=>({condition:t[Math.floor(Math.random()*t.length)],diagnosisDate:p(new Date,Math.floor(Math.random()*365*5)),status:["active","resolved","chronic"][Math.floor(Math.random()*3)]}))}generateMedications(){let t=[{name:"Metformin",dosage:"500mg",frequency:"Twice daily"},{name:"Lisinopril",dosage:"10mg",frequency:"Once daily"},{name:"Calcium",dosage:"1000mg",frequency:"Once daily"},{name:"Vitamin D",dosage:"2000 IU",frequency:"Once daily"},{name:"Atorvastatin",dosage:"20mg",frequency:"Once daily"}];return Array.from({length:Math.floor(Math.random()*3)+1},()=>D(f({},t[Math.floor(Math.random()*t.length)]),{startDate:p(new Date,Math.floor(Math.random()*365)),prescriber:"Dr. Primary Physician"}))}generateNextAppointment(){let t=Math.floor(Math.random()*60)+1;return new Date(Date.now()+t*24*60*60*1e3)}generateMockMetrics(t){let a=new Date;return Array.from({length:12},(e,o)=>{let r=w(a,11-o);return{patientId:t,timestamp:r,vitals:{bloodPressure:{systolic:110+Math.floor(Math.random()*30),diastolic:70+Math.floor(Math.random()*20),unit:"mmHg"},heartRate:{value:60+Math.floor(Math.random()*30),unit:"bpm"},temperature:{value:97.5+Math.random()*2.5,unit:"\xB0F"},oxygenSaturation:{value:95+Math.floor(Math.random()*5),unit:"%"},respiratoryRate:{value:14+Math.floor(Math.random()*6),unit:"breaths/min"}},labResults:{vitaminD:20+Math.random()*30,calcium:8.5+Math.random()*2},boneMineralDensity:this.generateBMDResults(r),hemoglobin:this.generateHemoglobinData(r),bloodGlucose:this.generateBloodGlucoseData(r)}})}generateBMDResults(t){let a=-2.5+Math.random()*2.5,e,o,r;return a<-2.5?(e="osteoporosis",o="critical",r=20+Math.random()*20):a<-1?(e="osteopenia",o="warning",r=40+Math.random()*25):(e="normal",o=a>0?"good":"normal",r=a>0?90+Math.random()*10:75+Math.random()*15),{measurementDate:t,tScore:a,zScore:-1.5+Math.random()*1.5,boneDensityGcm2:.8+Math.random()*.5,site:["lumbar_spine","femoral_neck","total_hip"][Math.floor(Math.random()*3)],interpretation:e,previousMeasurements:[],status:o,percentage:r}}generateHemoglobinData(t){let e=(this.mockPatients[Math.floor(Math.random()*this.mockPatients.length)]?.gender||"male")==="male"?12:11,o=e+Math.random()*4,r,i,s;return o<e?(r="low",i="critical",s=30+Math.random()*30):o>e+3?(r="high",i="warning",s=70+Math.random()*25):(r="normal",i="normal",s=85+Math.random()*15),{value:o,unit:"g/dL",measurementDate:t,status:r,referenceRange:{min:e,max:e+3},trend:["increasing","stable","decreasing"][Math.floor(Math.random()*3)],history:[],kpiStatus:i,percentage:s}}generateBloodGlucoseData(t){let a=70+Math.random()*80,e,o,r;return a<70?(e="low",o="critical",r=20+Math.random()*30):a>140?(e="high",o="warning",r=50+Math.random()*30):(e="normal",o="good",r=85+Math.random()*15),{value:a,unit:"mg/dL",measurementDate:t,status:e,referenceRange:{min:70,max:140},trend:["increasing","stable","decreasing"][Math.floor(Math.random()*3)],history:[],kpiStatus:o,percentage:r}}getPatients(t){let a=[...this.mockPatients];if(t?.searchQuery){let e=t.searchQuery.toLowerCase();a=a.filter(o=>o.firstName.toLowerCase().includes(e)||o.lastName.toLowerCase().includes(e)||o.mrn.toLowerCase().includes(e)||o.id.toLowerCase().includes(e)||o.primaryPhysician.toLowerCase().includes(e))}return t?.status&&(a=a.filter(e=>e.status===t.status)),t?.doctor&&(a=a.filter(e=>e.primaryPhysician===t.doctor)),c(a).pipe(l(500))}getPatientById(t){return c(this.mockPatients.find(a=>a.id===t)).pipe(l(300))}getHealthMetrics(t){return c(this.mockMetrics.get(t)||[]).pipe(l(500))}getLatestHealthMetrics(t){let a=this.mockMetrics.get(t)||[];return c(a[a.length-1]).pipe(l(300))}getKPIs(t){let a=this.mockMetrics.get(t);if(!a||a.length===0)return c([]).pipe(l(300));let e=a[a.length-1],o=e.boneMineralDensity,r=e.hemoglobin,i=e.bloodGlucose,s=e.labResults.vitaminD,d=e.labResults.calcium,I=[{id:"bmd",name:"Bone Mineral Density",value:o.tScore,unit:"T-Score",status:o.status,threshold:{critical:-2.5,warning:-1,normal:0,good:1},trend:{direction:"stable",percentage:2.5,period:"6M"},lastUpdated:o.measurementDate,percentage:o.percentage},{id:"hemoglobin",name:"Hemoglobin",value:r.value,unit:r.unit,status:r.kpiStatus,threshold:{critical:r.referenceRange.min,warning:r.referenceRange.min+1,normal:r.referenceRange.max-1,good:r.referenceRange.max},trend:{direction:r.trend==="increasing"?"up":r.trend==="decreasing"?"down":"stable",percentage:3.2,period:"6M"},lastUpdated:r.measurementDate,percentage:r.percentage},{id:"glucose",name:"Blood Glucose",value:i.value,unit:i.unit,status:i.kpiStatus,threshold:{critical:70,warning:100,normal:120,good:140},trend:{direction:i.trend==="increasing"?"up":i.trend==="decreasing"?"down":"stable",percentage:1.8,period:"6M"},lastUpdated:i.measurementDate,percentage:i.percentage},{id:"vitamin-d",name:"Vitamin D",value:s,unit:"ng/mL",status:s<20?"warning":s>40?"good":"normal",threshold:{critical:10,warning:20,normal:30,good:40},trend:{direction:"stable",percentage:5,period:"6M"},lastUpdated:e.timestamp,percentage:Math.min(100,s/50*100)},{id:"calcium",name:"Calcium",value:d,unit:"mg/dL",status:d<8.5||d>10.5?"warning":"normal",threshold:{critical:8,warning:8.5,normal:10,good:10.5},trend:{direction:"stable",percentage:2.1,period:"6M"},lastUpdated:e.timestamp,percentage:Math.min(100,(d-8)/4*100)}];return c(I).pipe(l(300))}static \u0275fac=function(a){return new(a||n)};static \u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})};var P=class n{constructor(t){this.mockDataService=t}getPatients(t){return this.mockDataService.getPatients(t)}getPatientById(t){return this.mockDataService.getPatientById(t)}searchPatients(t){return this.mockDataService.getPatients({searchQuery:t})}static \u0275fac=function(a){return new(a||n)(y(g))};static \u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})};export{g as a,P as b};
