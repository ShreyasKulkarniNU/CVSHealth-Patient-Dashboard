<div class="health-charts-container">
  <!-- Bone Mineral Density Trend -->
  <div class="chart-card dark-theme">
    <div class="chart-header">
      <div class="chart-title-section">
        <h3 class="chart-title">OVERVIEW</h3>
        <h4 class="chart-subtitle">Bone Mineral Density</h4>
      </div>
      <div class="chart-controls">
        <button class="time-btn" [class.active]="selectedTimeRange === 'month'" 
                (click)="selectedTimeRange = 'month'">Month</button>
        <button class="time-btn" [class.active]="selectedTimeRange === 'week'" 
                (click)="selectedTimeRange = 'week'">Week</button>
      </div>
    </div>
    @if (loading()) {
      <div class="chart-loading">Loading chart data...</div>
    } @else {
      <div class="chart-content">
        <div class="simple-chart">
          <div class="chart-area">
            <canvas #bmdChart></canvas>
          </div>
        </div>
        <div class="chart-legend">
          <span class="legend-item">
            <span class="legend-color" style="background: #9C27B0;"></span>
            <span class="legend-text">T-Score Trend</span>
          </span>
        </div>
      </div>
    }
  </div>

  <!-- Hemoglobin Variation -->
  <div class="chart-card dark-theme">
    <div class="chart-header">
      <div class="chart-title-section">
        <h3 class="chart-title">PERFORMANCE</h3>
        <h4 class="chart-subtitle">Hemoglobin Levels</h4>
      </div>
    </div>
    @if (loading()) {
      <div class="chart-loading">Loading chart data...</div>
    } @else {
      <div class="chart-content">
        <div class="simple-chart">
          <div class="chart-area">
            <canvas #hemoglobinChart></canvas>
          </div>
        </div>
        <div class="chart-legend">
          <span class="legend-item">
            <span class="legend-color" style="background: #FF9800;"></span>
            <span class="legend-text">Hemoglobin (mg/dL)</span>
          </span>
        </div>
      </div>
    }
  </div>

  <!-- Other Parameters -->
  <div class="chart-card">
    <div class="chart-header">
      <h3 class="chart-title">OTHER PARAMETERS</h3>
    </div>
    @if (!loading()) {
      @if (metrics().length > 0) {
        <div class="parameters-grid">
          @for (metric of metrics(); track metric.timestamp) {
            <div class="parameter-item">
              <div class="parameter-label">VITAMIN D</div>
              <div class="parameter-bar">
                <div class="parameter-fill" [style.width.%]="(metric.labResults.vitaminD / 50) * 100" style="background: var(--cvs-blue);"></div>
              </div>
              <div class="parameter-value">{{ metric.labResults.vitaminD | number:'1.0-0' }}%</div>
            </div>
            
            <div class="parameter-item">
              <div class="parameter-label">CALCIUM</div>
              <div class="parameter-bar">
                <div class="parameter-fill" [style.width.%]="((metric.labResults.calcium - 8) / 4) * 100" style="background: var(--cvs-blue);"></div>
              </div>
              <div class="parameter-value">{{ metric.labResults.calcium | number:'1.1-1' }}%</div>
            </div>
          }
        </div>
      }
    }
  </div>

  <!-- Recent Readings -->
  @if (!loading()) {
    @if (metrics().length > 0) {
      <div class="chart-card">
        <div class="chart-header">
          <h3 class="chart-title">RECENT READINGS</h3>
        </div>
        <div class="readings-grid">
          @for (metric of metrics(); track metric.timestamp) {
            <div class="reading-item">
              <span class="reading-label">Blood Pressure:</span>
              <span class="reading-value">{{ metric.vitals.bloodPressure.systolic }}/{{ metric.vitals.bloodPressure.diastolic }} mmHg</span>
            </div>
            <div class="reading-item">
              <span class="reading-label">Heart Rate:</span>
              <span class="reading-value">{{ metric.vitals.heartRate.value }} bpm</span>
            </div>
            <div class="reading-item">
              <span class="reading-label">Body Temperature:</span>
              <span class="reading-value">{{ metric.vitals.temperature.value | number:'1.1-1' }} Â°F</span>
            </div>
          }
        </div>
      </div>
    }
  }

  <!-- API Status -->
  <div class="chart-card">
    <div class="chart-header">
      <h3 class="chart-title">API STATUS</h3>
    </div>
    <div class="api-status">
      <div class="status-indicator">
        <span class="status-dot online"></span>
        <span class="status-text">ONLINE</span>
      </div>
      <div class="status-update">Last Update: 5 min ago</div>
    </div>
  </div>
</div>

